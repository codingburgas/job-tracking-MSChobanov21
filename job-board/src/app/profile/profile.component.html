<div class="container py-5">
  <div *ngIf="user; else notLoggedIn">
    <div class="card shadow mx-auto" style="max-width: 400px;">
      <div class="card-body text-center">
        <i class="bi bi-person-circle display-1 text-primary mb-3"></i>
        <h3 class="card-title mb-2">
          <span *ngIf="!editing">{{ user.name }}</span>
          <form *ngIf="editing" (ngSubmit)="save()" class="d-inline-block w-100">
            <input [(ngModel)]="newName" name="newName" class="form-control form-control-sm d-inline-block w-75" style="max-width: 200px;" />
          </form>
        </h3>
        <p class="card-text text-muted mb-1">{{ user.email }}</p>
        <span class="badge bg-info">{{ user.role }}</span>
        <div class="mt-3">
          <button *ngIf="!editing" class="btn btn-outline-primary btn-sm" (click)="startEdit()">Edit Name</button>
          <div *ngIf="editing" class="d-inline-block">
            <button class="btn btn-success btn-sm me-2" (click)="save()">Save</button>
            <button class="btn btn-secondary btn-sm" (click)="cancelEdit()">Cancel</button>
          </div>
        </div>
        <div *ngIf="success" class="alert alert-success mt-3">{{ success }}</div>
        <div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>
      </div>
    </div>
  </div>
  <ng-template #notLoggedIn>
    <div class="alert alert-warning text-center">You are not logged in.</div>
  </ng-template>
</div>
